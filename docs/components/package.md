
**都是包管理工具，就说一下特点或者不同的点好了**

[为什么现在更推荐 pnpm 而不是 npm/yarn?](https://mp.weixin.qq.com/s/PFFkWxfUkyw3iKS3Mukrpw)
### pnpm

> 包安装速度快

绝大部分情况下，速度会比npm/yarn快大概2~3倍

> 磁盘空间利用非常高效
 
*  不会重复安装同一个包。比如使用npm/yarn的时候，如果100个项目都安装了lodash，那么lodash很可能就被安装了100次，那磁盘中就有100个地方写入了这部分的代码，但是如果使用pnpm的话，只会安装一次，然后磁盘中只有一个地方写入，后面如果再次使用，都会直接使用`hardlink`
*  如果一个包，有不同的版本，那么pnpm也会极大程度地复用之前的代码。比如lodash有100个文件，然后更新版本只会，多了一个文件，那么磁盘当中并不会去重复写入101个文件，而是保留原来的100个文件的hardlink，仅仅写入那一个新增的文件

> 支持`monorepo`

  在这插入一个 `monorepo` 的知识点
    
> 安全性更高

npm/yarn，基于node_module的扁平结构，如果A依赖B，B依赖C，那么A当中可以直接使用C，但问题是 A 当中并没有声明 C 这个依赖。因此会出现这种非法访问的情况。但 pnpm 自创了一套依赖管理方式，很好地解决了这个问题（安全，规避非法访问依赖的风险）

### npm/yarn

> inatsll 原理，涉及到两部分，
> 一个是包如何到达项目node_modules当中，
> 二是node_modules内部如何去管理依赖

执行命令后，首先会构建依赖树，然后针对每个节点下的包，会经历下面四个步骤:
1. 将依赖包的版本区间解析为某个具体的版本号
2. 下载对应版本依赖的tar包到本地离线镜像
3. 将依赖从离线镜像解压到本地缓存
4. 将依赖从缓存拷贝到当前目录的node_modules目录

最早的npm1和npm2，node_modules是一个嵌套的结构，会导致如果不同的依赖包下面都有lodash，那这个lodash会在两个包的node_modules种被安装（`重复安装问题`），然后就是如果嵌套的层级很深，

